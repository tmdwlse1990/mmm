diff a/src/map/chrif.cpp b/src/map/chrif.cpp	(rejected hunks)
@@ -283,6 +285,8 @@ int chrif_save(map_session_data *sd, int flag) {
 
 	if ( (flag&CSAVE_QUITTING) && sd->state.active) { //Store player data which is quitting
 		if (chrif_isconnected()) {
+			if(battle_config.autoattack_clean_logout)
+				status_change_end(&sd->bl, SC_AUTOATTACK);
 			chrif_save_scdata(sd);
 			chrif_skillcooldown_save(sd);
 		}
