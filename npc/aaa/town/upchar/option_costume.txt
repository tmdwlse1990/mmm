icecastle,189,158,4	script	Designer Heidam#cos_ect	4_WHITETIGER,{
	if (checkweight(1119,5) == 0) {
		mes "- แบกของเยอะเกินไปนะเจ้าหนู -";
		mes "- เคลียของในตัวก่อนแล้วค่อยมาใหม่นะ -";
		close;
	}
	disable_items;
	mes "[ดีไซน์เนอร์ ไร้นาม]";
	mes "เลือกสิ จะออฟส่วนหัว หรือส่วนมัพ";
	next;
	if(select("- ส่วนหมวก:- ส่วนผ้าคลุม") == 2 ) goto GarmentOP;
THREETOP:
	mes "[ดีไซน์เนอร์ ไร้นาม]";
	mes "นายอยากจะออฟส่วนไหน ?";
	/*
	.@eq_top = getequipid(EQI_COSTUME_HEAD_TOP);
	.@eq_mid = getequipid(EQI_COSTUME_HEAD_MID);
	.@eq_low = getequipid(EQI_COSTUME_HEAD_LOW);
	
	/*
	if (.@eq_top == -1 && .@eq_mid == -1 && .@eq_low == -1) {
		mes "[ดีไซน์เนอร์ ไร้นาม]";
		mes "อย่างน้อยๆ ก็ใส่คอสก่อนเถอะน่า";
		close;
	}
	if (.@eq_top > -1) {
		.@part = EQI_COSTUME_HEAD_TOP;
		.@equip_id = .@eq_top;
	}
	else if (.@eq_mid > -1) {
		.@part = EQI_COSTUME_HEAD_MID;
		.@equip_id = .@eq_mid;
	}
	else if (.@eq_low > -1) {
		.@part = EQI_COSTUME_HEAD_LOW;
		.@equip_id = .@eq_low;
	}
	*/
	
	.@eq_top = getequipid(EQI_COSTUME_HEAD_TOP);
	.@eq_mid = getequipid(EQI_COSTUME_HEAD_MID);
	.@eq_low = getequipid(EQI_COSTUME_HEAD_LOW);
	mes "Top : ^i["+.@eq_top+"]";
	mes "Mid : ^i["+.@eq_mid+"]";
	mes "Low : ^i["+.@eq_low+"]";
	next;
	setarray .@equipid[1],EQI_COSTUME_HEAD_TOP,EQI_COSTUME_HEAD_MID,EQI_COSTUME_HEAD_LOW;
	setarray .@fakemenu$[1],"Top","Mid","Low";
	.@menu$ = "";
	for(.@i=1; .@i < getarraysize(.@fakemenu$); .@i++)
		.@menu$ = .@menu$ +":" + .@fakemenu$[.@i]; 
	
	.@part = .@equipid[select(.@menu$) - 1];
	.@equip_id = getequipid(.@part);
	
	.@location = getiteminfo(.@equip_id, ITEMINFO_LOCATIONS);
	.@equip_refine = getequiprefinerycnt(.@part);
	setarray .@card[0], getequipcardid(.@part, 0), getequipcardid(.@part, 1), getequipcardid(.@part, 2), getequipcardid(.@part, 3);
	
	mes "[ดีไซน์เนอร์ ไร้นาม]";
	mes "จะออฟเจ้านี่หรอ ^i["+.@equip_id+"](^0000FF" + getitemname(.@equip_id) + "^000000)";
	mes "อยากจะออฟช่องไหน ?";
	if (.@part == EQI_COSTUME_HEAD_TOP)
		.@slot = select( "Upper", "", "", "Cancel" ) - 1;	// the slot enchanted changes according to the location
	else if (.@part == EQI_COSTUME_HEAD_MID)
		.@slot = select( "", "Middle", "", "Cancel" ) - 1;
	else if (.@part == EQI_COSTUME_HEAD_LOW)
		.@slot = select( "", "", "Lower", "Cancel" ) - 1;

	next;
	
	switch(.@slot) {
	case 0:
		if (!(.@location & EQP_COSTUME_HEAD_TOP)) {
			mes "[ดีไซน์เนอร์ ไร้นาม]";
			mes "คอสนี้ ออฟส่วนนี้ไม่ได้นะ";	// custom
			close;
		}
		break;
	case 1:
		if (!(.@location & EQP_COSTUME_HEAD_MID)) {
			mes "[ดีไซน์เนอร์ ไร้นาม]";
			mes "คอสนี้ ออฟส่วนนี้ไม่ได้นะ";	// custom
			close;
		}
		break;
	case 2:
		if (!(.@location & EQP_COSTUME_HEAD_LOW)) {
			mes "[ดีไซน์เนอร์ ไร้นาม]";
			mes "คอสนี้ ออฟส่วนนี้ไม่ได้นะ";	// custom
			close;
		}
		break;
	default:
		mes "[ดีไซน์เนอร์ ไร้นาม]";
		mes "เหมือนจะมีบางอย่างผิดพลาด ติดต่อ แอดมินฉลามทันที~";
		close;
	}
	mes "[ดีไซน์เนอร์ ไร้นาม]";
	mes "จะออฟเจ้านี่จริงนะ ^i["+.@equip_id+"](^0000FF" + getitemname(.@equip_id) + "^000000)";
	mes "อยากจะออฟอะไร ?";
		// All Part Allow
		setarray .@stone_id[getarraysize(.@stone_id)],
			4700, 4700,	// Str +1
			4701, 4701,	// Str +2
			4702, 4702,	// Str +3
			4703, 4703,	// Str +4
			4704, 4704,	// Str +5
			4705, 4705,	// Str +6
			4706, 4706,	// Str +7
			4707, 4707,	// Str +8
			4708, 4708,	// Str +9
			4709, 4709,	// Str +10
			4710, 4710, // Int +1
			4711, 4711, // Int +2
			4712, 4712, // Int +3
			4713, 4713, // Int +4
			4714, 4714, // Int +5
			4715, 4715, // Int +6
			4716, 4716, // Int +7
			4717, 4717, // Int +8
			4718, 4718, // Int +9
			4719, 4719, // Int +10
			4720, 4720, // Dex +1
			4721, 4721, // Dex +2
			4722, 4722, // Dex +3
			4723, 4723, // Dex +4
			4724, 4724, // Dex +5
			4725, 4725, // Dex +6
			4726, 4726, // Dex +7
			4727, 4727, // Dex +8
			4728, 4728, // Dex +9
			4729, 4729, // Dex +10
			4730, 4730, // Agi +1
			4731, 4731, // Agi +2
			4732, 4732, // Agi +3
			4733, 4733, // Agi +4
			4734, 4734, // Agi +5
			4735, 4735, // Agi +6
			4736, 4736, // Agi +7
			4737, 4737, // Agi +8
			4738, 4738, // Agi +9
			4739, 4739, // Agi +10
			4740, 4740, // Vit +1
			4741, 4741, // Vit +2
			4742, 4742, // Vit +3
			4743, 4743, // Vit +4
			4744, 4744, // Vit +5
			4745, 4745, // Vit +6
			4746, 4746, // Vit +7
			4747, 4747, // Vit +8
			4748, 4748, // Vit +9
			4749, 4749, // Vit +10
			4750, 4750, // Luk +1
			4751, 4751, // Luk +2
			4752, 4752, // Luk +3
			4753, 4753, // Luk +4
			4754, 4754, // Luk +5
			4755, 4755, // Luk +6
			4756, 4756, // Luk +7
			4757, 4757, // Luk +8
			4758, 4758, // Luk +9
			4759, 4759, // Luk +10
			2099001, 2099001;	// All Stat +1

	.@size = getarraysize(.@stone_id);
	.@max_menu_size = 2047;	// temporary fix the menu length until new data
	.@i = 0;

	set .@menu$, "";
    set .@a, 0;
    while( .@a<=.@size) {
        if(getiteminfo(.@stone_id[.@a],2)>-1) {
            if(set(.@c,countitem(.@stone_id[.@a]))) {
                set .@menu$, .@menu$+"มี  ^FF0000"+getitemname(.@stone_id[.@a])+"^000000 จำนวน ^FF0000"+.@c+"^000000 อัน"+":";
                set .@b,.@b+1;
                set .@item[.@b], .@stone_id[.@a];
            }
		}
		.@a += 2;
	}
	select(.@menu$);
	set .@itm, .@item[@menu];
	
	.@stone = .@itm;
	.@enchant = .@stone_id[inarray(.@stone_id,.@stone) + 1];

	if (getequipid(.@part) < 0 || countitem(.@stone) < 1) {
		mes "[ดีไซน์เนอร์ ไร้นาม]";
		mes "นี่นายถอดของ ไม่ก็แอบเก็บหินไปสินะ นิสียแย่จริงๆ";
		close;
	}
	next;
	setdialogsize(400,200);
	mes "^FF0000   !!! โปรดอ่าน !!!^000000";
	mes "^ff0000ออฟอันนี้ ^i["+.@equip_id+"](^0000FF" + getitemname(.@equip_id) + ")^000000";
	mes "^ff0000ด้วยอันนี้ ^i["+.@stone+"](^0000FF" + getitemname(.@stone) + ")^000000";
	mes "^FF0000แน่ใจนะ?^000000";
	next;
	if (select( "Yes.", "No." ) == 2) {
		mes "[ดีไซน์เนอร์ ไร้นาม]";
		mes "โอกาสหน้ามาใหม่~";
		close;
	}
	delitem .@stone, 1;

	// anti-hack
	if (callfunc("F_IsEquipIDHack", .@part, .@equip_id) || callfunc("F_IsEquipCardHack", .@part, .@card[0], .@card[1], .@card[2], .@card[3]) || callfunc("F_IsEquipRefineHack", .@part, .@equip_refine))
		close;

	delequip .@part;
	.@card[.@slot] = .@enchant;
	getitem2 .@equip_id,1,1,.@equip_refine,0,.@card[0],.@card[1],.@card[2],.@card[3];
	close;
	
GarmentOP:

	.@part = EQI_COSTUME_GARMENT;
	.@equip_id = getequipid(.@part);
	.@equip_refine = getequiprefinerycnt(.@part);
	setarray .@card[0], getequipcardid(.@part, 0), getequipcardid(.@part, 1), getequipcardid(.@part, 2), getequipcardid(.@part, 3);
	.@slot = 0;
	if (.@equip_id < 0) {
		mes "[ดีไซน์เนอร์ ไร้นาม]";
		mes "ใส่คอสก่อนนะ";	// custom
		close;
	}
	mes "[ดีไซน์เนอร์ ไร้นาม]";
	mes "จะออฟเจ้านี่จริงนะ ^i["+.@equip_id+"](^0000FF" + getitemname(.@equip_id) + "^000000)";
	mes "อยากจะออฟอะไร ?";
		// All Part Allow
		setarray .@stone_id[getarraysize(.@stone_id)],
			4700, 4700,	// Str +1
			4701, 4701,	// Str +2
			4702, 4702,	// Str +3
			4703, 4703,	// Str +4
			4704, 4704,	// Str +5
			4705, 4705,	// Str +6
			4706, 4706,	// Str +7
			4707, 4707,	// Str +8
			4708, 4708,	// Str +9
			4709, 4709,	// Str +10
			4710, 4710, // Int +1
			4711, 4711, // Int +2
			4712, 4712, // Int +3
			4713, 4713, // Int +4
			4714, 4714, // Int +5
			4715, 4715, // Int +6
			4716, 4716, // Int +7
			4717, 4717, // Int +8
			4718, 4718, // Int +9
			4719, 4719, // Int +10
			4720, 4720, // Dex +1
			4721, 4721, // Dex +2
			4722, 4722, // Dex +3
			4723, 4723, // Dex +4
			4724, 4724, // Dex +5
			4725, 4725, // Dex +6
			4726, 4726, // Dex +7
			4727, 4727, // Dex +8
			4728, 4728, // Dex +9
			4729, 4729, // Dex +10
			4730, 4730, // Agi +1
			4731, 4731, // Agi +2
			4732, 4732, // Agi +3
			4733, 4733, // Agi +4
			4734, 4734, // Agi +5
			4735, 4735, // Agi +6
			4736, 4736, // Agi +7
			4737, 4737, // Agi +8
			4738, 4738, // Agi +9
			4739, 4739, // Agi +10
			4740, 4740, // Vit +1
			4741, 4741, // Vit +2
			4742, 4742, // Vit +3
			4743, 4743, // Vit +4
			4744, 4744, // Vit +5
			4745, 4745, // Vit +6
			4746, 4746, // Vit +7
			4747, 4747, // Vit +8
			4748, 4748, // Vit +9
			4749, 4749, // Vit +10
			4750, 4750, // Luk +1
			4751, 4751, // Luk +2
			4752, 4752, // Luk +3
			4753, 4753, // Luk +4
			4754, 4754, // Luk +5
			4755, 4755, // Luk +6
			4756, 4756, // Luk +7
			4757, 4757, // Luk +8
			4758, 4758, // Luk +9
			4759, 4759, // Luk +10
			2099001, 2099001,	// All Stat +1
			2235001, 2236001,	//	Swordman skill 1
			2235002, 2236002,	//	Swordman skill 2
			2235003, 2236003,	//	Archer skill 1
			2235004, 2236004,	//	Archer skill 2
			2235005, 2236005,	//	Acolyte skill 1
			2235006, 2236006,	//	Acolyte skill 2
			2235007, 2236007,	//	Thief skill 1
			2235008, 2236008,	//	Thief skill 2
			2235009, 2236009,	//	Merchant skill 1
			2235010, 2236010,	//	Merchant skill 2
			2235011, 2236011,	//	Mage skill 1
			2235012, 2236012,	//	Mage skill 2
			2235013, 2236013,	//	Novice skill 1
			2235014, 2236014,	//	Novice skill 2
			2235015, 2236015,	//	Knight skill 1
			2235016, 2236016,	//	Knight skill 2
			2235017, 2236017,	//	Priest skill 1
			2235018, 2236018,	//	Priest skill 2
			2235019, 2236019,	//	Wizard skill 1
			2235020, 2236020,	//	Wizard skill 2
			2235021, 2236021,	//	Blacksmith skill 1
			2235022, 2236022,	//	Blacksmith skill 2
			2235023, 2236023,	//	Hunter skill 1
			2235024, 2236024,	//	Hunter skill 2
			2235025, 2236025,	//	Ass skill 1
			2235026, 2236026,	//	Ass skill 2
			2235027, 2236027,	//	Crusa skill 1
			2235028, 2236028,	//	Crusa skill 2
			2235029, 2236029,	//	monk skill 1
			2235030, 2236030,	//	monk skill 2
			2235031, 2236031,	//	sage skill 1
			2235032, 2236032,	//	sage skill 2
			2235033, 2236033,	//	rogue skill 1
			2235034, 2236034,	//	rogue skill 2
			2235035, 2236035,	//	alche skill 1
			2235036, 2236036,	//	alche skill 2
			2235037, 2236037,	//	bd skill 1
			2235038, 2236038,	//	bd skill 2
			2235039, 2236039,	//	Gunslinger 1
			2235040, 2236040,	//	Ninja 1
			2235041, 2236041,	//	S-Novice skill 1
			2235042, 2236042;	//	Taekwon 1

	.@size = getarraysize(.@stone_id);
	.@max_menu_size = 2047;	// temporary fix the menu length until new data
	.@i = 0;

	set .@menu$, "";
    set .@a, 0;
    while( .@a<=.@size) {
        if(getiteminfo(.@stone_id[.@a],2)>-1) {
            if(set(.@c,countitem(.@stone_id[.@a]))) {
                set .@menu$, .@menu$+"มี  ^FF0000"+getitemname(.@stone_id[.@a])+"^000000 จำนวน ^FF0000"+.@c+"^000000 อัน"+":";
                set .@b,.@b+1;
                set .@item[.@b], .@stone_id[.@a];
            }
		}
		.@a += 2;
	}
	select(.@menu$);
	set .@itm, .@item[@menu];
	
	.@stone = .@itm;
	.@enchant = .@stone_id[inarray(.@stone_id,.@stone) + 1];

	if (getequipid(.@part) < 0 || countitem(.@stone) < 1) {
		mes "[ดีไซน์เนอร์ ไร้นาม]";
		mes "นี่นายถอดของ ไม่ก็แอบเก็บหินไปสินะ นิสียแย่จริงๆ";
		close;
	}
	next;
	setdialogsize(400,200);
	mes "^FF0000   !!! โปรดอ่าน !!!^000000";
	mes "^ff0000ออฟอันนี้ ^i["+.@equip_id+"](^0000FF" + getitemname(.@equip_id) + ")^000000";
	mes "^ff0000ด้วยอันนี้ ^i["+.@stone+"](^0000FF" + getitemname(.@stone) + ")^000000";
	mes "^FF0000แน่ใจนะ?^000000";
	next;
	if (select( "Yes.", "No." ) == 2) {
		mes "[ดีไซน์เนอร์ ไร้นาม]";
		mes "โอกาสหน้ามาใหม่~";
		close;
	}
	delitem .@stone, 1;

	// anti-hack
	if (callfunc("F_IsEquipIDHack", .@part, .@equip_id) || callfunc("F_IsEquipCardHack", .@part, .@card[0], .@card[1], .@card[2], .@card[3]) || callfunc("F_IsEquipRefineHack", .@part, .@equip_refine))
		close;

	delequip .@part;
	.@card[.@slot] = .@enchant;
	getitem2 .@equip_id,1,1,.@equip_refine,0,.@card[0],.@card[1],.@card[2],.@card[3];
	close;
Oninit:
	waitingroom "ออฟชั่นคอสตูม",0;
	end;
}